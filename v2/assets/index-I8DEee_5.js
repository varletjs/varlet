import{au as se,a4 as oe,av as te,d as G,C as A,aw as W,a1 as K,ax as le,_ as B,e as T,m as U,v as L,x,f as re,w as d,T as R,O as i,t as D,q as r,p as N,S as a,n as ne,an as E,W as de,r as z,E as ue,a6 as me,ao as ie,b as p,N as pe,P as c,$ as ce,a0 as ge}from"./index-vwO9GBzB.js";import{d as q,c as H,u as fe,w as J,a as Q}from"./components-PfdRgJoR.js";import{g as ve,a as j,b as be,s as _e}from"./elements-b2tD0H-w.js";import{l as Ve}from"./shared-0s1dBi3F.js";import{I as Me}from"./index-R7F1os-T.js";import{A as O}from"./appType-fkxN3UmL.js";const X={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:q(),onReset:q()},Z=Symbol("FORM_BIND_FORM_ITEM_KEY");function ye(){const{parentProvider:s,index:l,bindParent:m}=oe(Z),u=te();return{index:l,form:s,bindForm:m?_=>{m({..._,instance:u})}:null}}function ke(){const{childProviders:s,length:l,bindChildren:m}=se(Z);return{length:l,formItems:s,bindFormItems:m}}const{name:$e,n:he}=H("form"),Ce=G({name:$e,props:X,setup(s){const l=A(()=>s.disabled),m=A(()=>s.readonly),{formItems:u,bindFormItems:v}=ke();v({disabled:l,readonly:m});function o(n){setTimeout(()=>{const g=ve(n),f=g===window?0:j(g),M=j(n)-f-be(s.scrollToErrorOffsetY);_e(g,{top:M,animation:Ve})},300)}async function y(n){W(n);const g=await k();K(s.onSubmit,g)}function b(n){W(n),V(),K(s.onReset)}async function k(){var g;const n=await Promise.all(u.map(({validate:f})=>f()));if(s.scrollToError){const[,f]=le(n,h=>h===!1,s.scrollToError),M=f>-1;if(M){const h=(g=u[f].instance.proxy)==null?void 0:g.$el;o(h)}return!M}return n.every(f=>f===!0)}function V(){return u.forEach(({reset:n})=>n())}function $(){return u.forEach(({resetValidation:n})=>n())}return{n:he,handleSubmit:y,handleReset:b,validate:k,reset:V,resetValidation:$}}});function Te(s,l,m,u,v,_){return T(),U("form",{class:x(s.n()),onSubmit:l[0]||(l[0]=(...o)=>s.handleSubmit&&s.handleSubmit(...o)),onReset:l[1]||(l[1]=(...o)=>s.handleReset&&s.handleReset(...o))},[L(s.$slots,"default")],34)}const I=B(Ce,[["render",Te]]);I.useValidation=fe;I.useForm=ye;J(I);Q(I,X);const ee={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{name:we,n:Ue}=H("form-details"),Ee=G({name:we,props:ee,setup:()=>({n:Ue})}),Fe={key:0},Se={key:0};function xe(s,l,m,u,v,_){return T(),re(R,{name:s.n()},{default:d(()=>[s.errorMessage||s.extraMessage||s.$slots["extra-message"]?(T(),U("div",{key:0,class:x(s.n())},[N("div",{class:x(s.n("error-message"))},[r(R,{name:s.n("message")},{default:d(()=>[s.errorMessage?(T(),U("div",Fe,i(s.errorMessage),1)):D("v-if",!0)]),_:1},8,["name"])],2),N("div",{class:x(s.n("extra-message"))},[r(R,{name:s.n("message")},{default:d(()=>[L(s.$slots,"extra-message",{},()=>[s.extraMessage?(T(),U("div",Se,i(s.extraMessage),1)):D("v-if",!0)])]),_:3},8,["name"])],2)],2)):D("v-if",!0)]),_:3},8,["name"])}const Y=B(Ee,[["render",xe]]);J(Y);Q(Y,ee);const Ie={__name:"CustomFormComponent",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},validateTrigger:{type:Array,default:()=>["onToggle"]},extraMessage:{type:String}},emits:["update:modelValue"],setup(s,{expose:l,emit:m}){const u=s,v=m,{useForm:_,useValidation:o}=I,{errorMessage:y,validateWithTrigger:b,validate:k,resetValidation:V}=o(),{bindForm:$,form:n}=_(),g=()=>k(u.rules,u.modelValue);function f(){v("update:modelValue",!1),V()}function M(F){ne(()=>{const{validateTrigger:S,rules:w,modelValue:C}=u;b(S,F,w,C)})}function h(){u.readonly||u.disabled||n!=null&&n.readonly.value||n!=null&&n.disabled.value||(v("update:modelValue",!u.modelValue),M("onToggle"))}const P={reset:f,validate:g,resetValidation:V};return l(P),$==null||$(P),(F,S)=>{var w;return T(),U("div",{class:x(["var-custom-form-component",{"var-custom-form-component--disabled":s.disabled||((w=a(n))==null?void 0:w.disabled.value),"var-custom-form-component--error":a(y)}])},[N("div",{class:"var-custom-form-component__container",onClick:h},[r(a(Me),{class:"var-custom-form-component__icon",name:s.modelValue?"checkbox-marked-circle":"close-circle",transition:250},null,8,["name"]),L(F.$slots,"default",{},void 0,!0)]),r(a(Y),{"error-message":a(y),"extra-message":s.extraMessage},null,8,["error-message","extra-message"])],2)}}},Pe=B(Ie,[["__scopeId","data-v-235f566f"]]),Ne={example:"表单示例",username:"请输入用户名",usernameMessage:"用户名不能为空",password:"请输入密码",passwordMessage:"请输入密码",department:"请选择部门",departmentMessage:"必须选一个部门",eat:"吃饭",sleep:"睡觉",play:"打游戏",departmentUnit:"部",group:"请选择组织",groupMessage:"至少选择一个组织",groupUnit:"组",genderMessage:"必须选择一个性别",male:"男",female:"女",rateMessage:"必须大于2",likeMessage:"至少选择一个爱好",licenseMessage:"您必须开启",countMessage:"必须大于10",rangeMessage:"必须大于10",filesMessage:"至少上传一张图片",customFormComponent:"自定义表单组件",customLabel:"点我切换",customErrorMessage:"必须是对勾",customExtraMessage:"附加信息",controller:"表单控制",reset:"清空表单",resetValidation:"清空验证",validate:"触发验证",disabled:"表单禁用",readonly:"表单只读"},Be={example:"Form Example",username:"Please input username",usernameMessage:"The username cannot be empty",password:"Please input password",passwordMessage:"The password cannot be empty",department:"Please select department",departmentMessage:"The select cannot be empty",eat:"Eat",sleep:"Sleep",play:"Play game",departmentUnit:" department",group:"Please select group",groupMessage:"The select cannot be empty",groupUnit:" group",genderMessage:"The gender cannot be empty",male:"Male",female:"Female",rateMessage:"It has to be greater than 2",likeMessage:"The select cannot be empty",licenseMessage:"You must turn on",countMessage:"It has to be greater than 10",rangeMessage:"It has to be greater than 10",filesMessage:"Upload at least one picture",customFormComponent:"Custom Form Component",customLabel:"Click toggle",customErrorMessage:"Please check it",customExtraMessage:"Extra message",controller:"Form control",reset:"Empty form",resetValidation:"Empty the validation",validate:"Trigger validation",disabled:"Form disabled",readonly:"Form readonly"},{add:ae,use:Re,pack:t,packs:Ge,merge:He}=E.useLocale(),De=s=>{E.use(s),Re(s)};E.add("zh-CN",E.zhCN);E.add("en-US",E.enUS);ae("zh-CN",Ne);ae("en-US",Be);const ze=s=>(ce("data-v-f534cc41"),s=s(),ge(),s),Oe=ze(()=>N("div",{class:"space"},null,-1)),Le={__name:"index",setup(s){const l=de({username:"",password:"",department:"",gender:void 0,license:!1,range:0,count:0,group:[],score:0,like:[],files:[],custom:!1}),m=z(null),u=z(!1),v=z(!1);return ue(_=>{var o;De(_),(o=m.value)==null||o.reset()}),me(ie.dark),(_,o)=>{const y=p("var-input"),b=p("var-option"),k=p("var-select"),V=p("var-radio"),$=p("var-radio-group"),n=p("var-checkbox"),g=p("var-checkbox-group"),f=p("var-rate"),M=p("var-switch"),h=p("var-counter"),P=p("var-slider"),F=p("var-uploader"),S=p("var-space"),w=p("var-form"),C=p("var-button");return T(),U(pe,null,[r(a(O),null,{default:d(()=>[c(i(a(t).example),1)]),_:1}),r(w,{ref_key:"form",ref:m,disabled:u.value,readonly:v.value,"scroll-to-error":"start","scroll-to-error-offset-y":"14.4vmin"},{default:d(()=>[r(S,{direction:"column",size:["4vmin",0]},{default:d(()=>[r(y,{placeholder:a(t).username,rules:[e=>!!e||a(t).usernameMessage],modelValue:l.username,"onUpdate:modelValue":o[0]||(o[0]=e=>l.username=e)},null,8,["placeholder","rules","modelValue"]),r(y,{type:"password",placeholder:a(t).password,rules:[e=>!!e||a(t).passwordMessage],modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=e=>l.password=e)},null,8,["placeholder","rules","modelValue"]),r(k,{placeholder:a(t).department,rules:[e=>!!e||a(t).departmentMessage],modelValue:l.department,"onUpdate:modelValue":o[2]||(o[2]=e=>l.department=e)},{default:d(()=>[r(b,{label:`${a(t).eat}${a(t).departmentUnit}`},null,8,["label"]),r(b,{label:`${a(t).sleep}${a(t).departmentUnit}`},null,8,["label"]),r(b,{label:`${a(t).play}${a(t).departmentUnit}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r(k,{multiple:"",placeholder:a(t).group,rules:[e=>e.length>=1||a(t).groupMessage],modelValue:l.group,"onUpdate:modelValue":o[3]||(o[3]=e=>l.group=e)},{default:d(()=>[r(b,{label:`${a(t).eat}${a(t).groupUnit}`},null,8,["label"]),r(b,{label:`${a(t).sleep}${a(t).groupUnit}`},null,8,["label"]),r(b,{label:`${a(t).play}${a(t).groupUnit}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r($,{rules:[e=>!!e||a(t).genderMessage],modelValue:l.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>l.gender=e)},{default:d(()=>[r(V,{"checked-value":1},{default:d(()=>[c(i(a(t).male),1)]),_:1}),r(V,{"checked-value":2},{default:d(()=>[c(i(a(t).female),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(g,{rules:[e=>e.length>0||a(t).likeMessage],modelValue:l.like,"onUpdate:modelValue":o[5]||(o[5]=e=>l.like=e)},{default:d(()=>[r(n,{"checked-value":1},{default:d(()=>[c(i(a(t).eat),1)]),_:1}),r(n,{"checked-value":2},{default:d(()=>[c(i(a(t).sleep),1)]),_:1}),r(n,{"checked-value":3},{default:d(()=>[c(i(a(t).play),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(f,{rules:[e=>e>=3||a(t).rateMessage],modelValue:l.score,"onUpdate:modelValue":o[6]||(o[6]=e=>l.score=e)},null,8,["rules","modelValue"]),r(M,{rules:[e=>!!e||a(t).licenseMessage],modelValue:l.license,"onUpdate:modelValue":o[7]||(o[7]=e=>l.license=e)},null,8,["rules","modelValue"]),r(h,{rules:[e=>e>10||a(t).countMessage],modelValue:l.count,"onUpdate:modelValue":o[8]||(o[8]=e=>l.count=e)},null,8,["rules","modelValue"]),r(P,{rules:[e=>e>10||a(t).rangeMessage],modelValue:l.range,"onUpdate:modelValue":o[9]||(o[9]=e=>l.range=e)},null,8,["rules","modelValue"]),r(F,{rules:[e=>e.length>=1||a(t).filesMessage],modelValue:l.files,"onUpdate:modelValue":o[10]||(o[10]=e=>l.files=e)},null,8,["rules","modelValue"])]),_:1}),r(a(O),null,{default:d(()=>[c(i(a(t).customFormComponent),1)]),_:1}),r(a(Pe),{"extra-message":a(t).customExtraMessage,rules:[e=>!!e||a(t).customErrorMessage],modelValue:l.custom,"onUpdate:modelValue":o[11]||(o[11]=e=>l.custom=e)},{default:d(()=>[c(i(a(t).customLabel),1)]),_:1},8,["extra-message","rules","modelValue"])]),_:1},8,["disabled","readonly"]),r(a(O),null,{default:d(()=>[c(i(a(t).controller),1)]),_:1}),r(S,{direction:"column",size:["4vmin",0]},{default:d(()=>[r(C,{block:"",type:"danger",onClick:o[12]||(o[12]=e=>m.value.reset())},{default:d(()=>[c(i(a(t).reset),1)]),_:1}),r(C,{block:"",type:"warning",onClick:o[13]||(o[13]=e=>m.value.resetValidation())},{default:d(()=>[c(i(a(t).resetValidation),1)]),_:1}),r(C,{block:"",type:"success",onClick:o[14]||(o[14]=e=>m.value.validate())},{default:d(()=>[c(i(a(t).validate),1)]),_:1}),r(C,{block:"",type:"info",onClick:o[15]||(o[15]=e=>u.value=!u.value)},{default:d(()=>[c(i(a(t).disabled),1)]),_:1}),r(C,{block:"",type:"primary",onClick:o[16]||(o[16]=e=>v.value=!v.value)},{default:d(()=>[c(i(a(t).readonly),1)]),_:1})]),_:1}),Oe],64)}}},Je=B(Le,[["__scopeId","data-v-f534cc41"]]);export{Je as default};
