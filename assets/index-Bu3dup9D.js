import{au as le,a4 as te,av as re,d as j,D as Y,aw as W,a3 as K,ax as ne,b as N,m as T,h as y,t as A,x as F,f as ue,w as n,y as L,p as P,q as r,T as D,R as c,U as a,n as de,a6 as w,X as me,r as z,F as ie,S as pe,e as p,Q as g,N as ce}from"./index-DtCrA0ro.js";import{d as Q,c as G,u as ge,w as H,a as J}from"./components-DCYWhF10.js";import{g as fe,a as X,b as ve,s as be}from"./elements-C0ey49jB.js";import{l as Me}from"./shared-BLZOSN1R.js";import{I as Ve}from"./index-BmK8NkgI.js";import{A as O}from"./appType-B5zMYMV2.js";const Z={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:Q(),onReset:Q()},ee=Symbol("FORM_BIND_FORM_ITEM_KEY");function _e(){const{parentProvider:l,index:t,bindParent:m}=te(ee),d=re();return{index:t,form:l,bindForm:m?_=>{m({..._,instance:d})}:null}}function ye(){const{childProviders:l,length:t,bindChildren:m}=le(ee);return{length:t,formItems:l,bindFormItems:m}}const{name:he,n:ke}=G("form"),$e=j({name:he,props:Z,setup(l){const t=Y(()=>l.disabled),m=Y(()=>l.readonly),{formItems:d,bindFormItems:b}=ye();b({disabled:t,readonly:m});function f(u){setTimeout(()=>{const i=fe(u),M=i===window?0:X(i),V=X(u)-M-ve(l.scrollToErrorOffsetY);be(i,{top:V,animation:Me})},300)}async function s(u){W(u);const i=await k();K(l.onSubmit,i)}function h(u){W(u),v(),K(l.onReset)}async function k(){const u=await Promise.all(d.map(({validate:i})=>i()));if(l.scrollToError){const[,i]=ne(u,V=>V===!1,l.scrollToError),M=i>-1;if(M){const V=d[i].instance.proxy?.$el;f(V)}return!M}return u.every(i=>i===!0)}function v(){return d.forEach(({reset:u})=>u())}function $(){return d.forEach(({resetValidation:u})=>u())}return{n:ke,handleSubmit:s,handleReset:h,validate:k,reset:v,resetValidation:$}}});function Te(l,t,m,d,b,_){return y(),T("form",{class:F(l.n()),onSubmit:t[0]||(t[0]=(...f)=>l.handleSubmit&&l.handleSubmit(...f)),onReset:t[1]||(t[1]=(...f)=>l.handleReset&&l.handleReset(...f))},[A(l.$slots,"default")],34)}const x=N($e,[["render",Te]]);x.useValidation=ge;x.useForm=_e;H(x);J(x,Z);const ae={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{name:we,n:Ce}=G("form-details"),Ue=j({name:we,props:ae,setup:()=>({n:Ce})}),Fe={key:0},xe={key:0};function Ee(l,t,m,d,b,_){return y(),ue(D,{name:l.n()},{default:n(()=>[l.errorMessage||l.extraMessage||l.$slots["extra-message"]?(y(),T("div",{key:0,class:F(l.n())},[P("div",{class:F(l.n("error-message"))},[r(D,{name:l.n("message")},{default:n(()=>[l.errorMessage?(y(),T("div",Fe,c(l.errorMessage),1)):L("v-if",!0)]),_:1},8,["name"])],2),P("div",{class:F(l.n("extra-message"))},[r(D,{name:l.n("message")},{default:n(()=>[A(l.$slots,"extra-message",{},()=>[l.extraMessage?(y(),T("div",xe,c(l.extraMessage),1)):L("v-if",!0)])]),_:3},8,["name"])],2)],2)):L("v-if",!0)]),_:3},8,["name"])}const q=N(Ue,[["render",Ee]]);H(q);J(q,ae);const Se={__name:"CustomFormComponent",props:{modelValue:Boolean,disabled:Boolean,readonly:Boolean,rules:{type:Array},validateTrigger:{type:Array,default:()=>["onToggle"]},extraMessage:{type:String}},emits:["update:modelValue"],setup(l,{expose:t,emit:m}){const d=l,b=m,{useForm:_,useValidation:f}=x,{errorMessage:s,validateWithTrigger:h,validate:k,resetValidation:v}=f(),{bindForm:$,form:u}=_(),i=()=>k(d.rules,d.modelValue);function M(){b("update:modelValue",!1),v()}function V(C){de(()=>{const{validateTrigger:S,rules:R,modelValue:I}=d;h(S,C,R,I)})}function B(){d.readonly||d.disabled||u?.readonly.value||u?.disabled.value||(b("update:modelValue",!d.modelValue),V("onToggle"))}const E={reset:M,validate:i,resetValidation:v};return t(E),$?.(E),(C,S)=>(y(),T("div",{class:F(["var-custom-form-component",{"var-custom-form-component--disabled":l.disabled||a(u)?.disabled.value,"var-custom-form-component--error":a(s)}])},[P("div",{class:"var-custom-form-component__container",onClick:B},[r(a(Ve),{class:"var-custom-form-component__icon",name:l.modelValue?"checkbox-marked-circle":"close-circle",transition:250},null,8,["name"]),A(C.$slots,"default",{},void 0,!0)]),r(a(q),{"error-message":a(s),"extra-message":l.extraMessage},null,8,["error-message","extra-message"])],2))}},Ie=N(Se,[["__scopeId","data-v-2662b6e0"]]),Pe={example:"Form Example",username:"Please input username",usernameMessage:"The username cannot be empty",password:"Please input password",passwordMessage:"The password cannot be empty",email:"Please input email",emailMessage:"The email cannot be empty",passwordMinLengthMessage:"The password cannot be less than 8 characters",department:"Please select department",departmentMessage:"The select cannot be empty",eat:"Eat",sleep:"Sleep",play:"Play game",departmentUnit:" department",group:"Please select group",groupMessage:"The select cannot be empty",groupUnit:" group",genderMessage:"The gender cannot be empty",male:"Male",female:"Female",rateMessage:"It has to be greater than 2",likeMessage:"The select cannot be empty",licenseMessage:"You must turn on",countMessage:"It has to be greater than 10",rangeMessage:"It has to be greater than 10",filesMessage:"Upload at least one picture",customFormComponent:"Custom Form Component",customLabel:"Click toggle",customErrorMessage:"Please check it",customExtraMessage:"Extra message",controller:"Form control",reset:"Empty form",resetValidation:"Empty the validation",validate:"Trigger validation",disabled:"Form disabled",readonly:"Form readonly"},Ne={example:"表单示例",username:"请输入用户名",usernameMessage:"用户名不能为空",password:"请输入密码",passwordMessage:"密码不能为空",email:"请输入邮箱",emailMessage:"邮箱不能为空",passwordMinLengthMessage:"密码长度不能低于8位",department:"请选择部门",departmentMessage:"必须选一个部门",eat:"吃饭",sleep:"睡觉",play:"打游戏",departmentUnit:"部",group:"请选择组织",groupMessage:"至少选择一个组织",groupUnit:"组",genderMessage:"必须选择一个性别",male:"男",female:"女",rateMessage:"必须大于2",likeMessage:"至少选择一个爱好",licenseMessage:"您必须开启",countMessage:"必须大于10",rangeMessage:"必须大于10",filesMessage:"至少上传一张图片",customFormComponent:"自定义表单组件",customLabel:"点我切换",customErrorMessage:"必须是对勾",customExtraMessage:"附加信息",controller:"表单控制",reset:"清空表单",resetValidation:"清空验证",validate:"触发验证",disabled:"表单禁用",readonly:"表单只读"},{add:se,use:Be,t:o,merge:We}=w.useLocale(),Re=l=>{w.use(l),Be(l)};w.add("zh-CN",w.zhCN);w.add("en-US",w.enUS);se("zh-CN",Ne);se("en-US",Pe);const Le={__name:"index",setup(l){const t=me({username:"",password:"",email:"",department:"",gender:void 0,license:!1,range:0,count:0,group:[],score:0,like:[],files:[],custom:!1}),m=z(null),d=z(!1),b=z(!1),_=Y(()=>["@qq.com","@163.com","@gmail.com"].map(f=>{const[s]=t.email.split("@");return{label:s+f,value:s+f}}));return ie(f=>{Re(f),m.value?.reset()}),pe(),(f,s)=>{const h=p("var-input"),k=p("var-auto-complete"),v=p("var-option"),$=p("var-select"),u=p("var-radio"),i=p("var-radio-group"),M=p("var-checkbox"),V=p("var-checkbox-group"),B=p("var-rate"),E=p("var-switch"),C=p("var-counter"),S=p("var-slider"),R=p("var-uploader"),I=p("var-space"),oe=p("var-form"),U=p("var-button");return y(),T(ce,null,[r(a(O),null,{default:n(()=>[g(c(a(o)("example")),1)]),_:1}),r(oe,{ref_key:"form",ref:m,disabled:d.value,readonly:b.value,"scroll-to-error":"start","scroll-to-error-offset-y":"14.4vmin"},{default:n(()=>[r(I,{direction:"column",size:["4vmin",0]},{default:n(()=>[r(h,{modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=e=>t.username=e),placeholder:a(o)("username"),rules:[e=>!!e||a(o)("usernameMessage")]},null,8,["modelValue","placeholder","rules"]),r(h,{modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.password=e),type:"password",placeholder:a(o)("password"),rules:[e=>!!e||a(o)("passwordMessage"),e=>e.length>=8||a(o)("passwordMinLengthMessage")]},null,8,["modelValue","placeholder","rules"]),r(k,{modelValue:t.email,"onUpdate:modelValue":s[2]||(s[2]=e=>t.email=e),placeholder:a(o)("email"),rules:[e=>!!e||a(o)("emailMessage")],options:_.value},null,8,["modelValue","placeholder","rules","options"]),r($,{modelValue:t.department,"onUpdate:modelValue":s[3]||(s[3]=e=>t.department=e),placeholder:a(o)("department"),rules:[e=>!!e||a(o)("departmentMessage")]},{default:n(()=>[r(v,{label:`${a(o)("eat")}${a(o)("departmentUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("sleep")}${a(o)("departmentUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("play")}${a(o)("departmentUnit")}`},null,8,["label"])]),_:1},8,["modelValue","placeholder","rules"]),r($,{modelValue:t.group,"onUpdate:modelValue":s[4]||(s[4]=e=>t.group=e),multiple:"",placeholder:a(o)("group"),rules:[e=>e.length>=1||a(o)("groupMessage")]},{default:n(()=>[r(v,{label:`${a(o)("eat")}${a(o)("groupUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("sleep")}${a(o)("groupUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("play")}${a(o)("groupUnit")}`},null,8,["label"])]),_:1},8,["modelValue","placeholder","rules"]),r(i,{modelValue:t.gender,"onUpdate:modelValue":s[5]||(s[5]=e=>t.gender=e),rules:[e=>!!e||a(o)("genderMessage")]},{default:n(()=>[r(u,{"checked-value":1},{default:n(()=>[g(c(a(o)("male")),1)]),_:1}),r(u,{"checked-value":2},{default:n(()=>[g(c(a(o)("female")),1)]),_:1})]),_:1},8,["modelValue","rules"]),r(V,{modelValue:t.like,"onUpdate:modelValue":s[6]||(s[6]=e=>t.like=e),rules:[e=>e.length>0||a(o)("likeMessage")]},{default:n(()=>[r(M,{"checked-value":1},{default:n(()=>[g(c(a(o)("eat")),1)]),_:1}),r(M,{"checked-value":2},{default:n(()=>[g(c(a(o)("sleep")),1)]),_:1}),r(M,{"checked-value":3},{default:n(()=>[g(c(a(o)("play")),1)]),_:1})]),_:1},8,["modelValue","rules"]),r(B,{modelValue:t.score,"onUpdate:modelValue":s[7]||(s[7]=e=>t.score=e),rules:[e=>e>=3||a(o)("rateMessage")]},null,8,["modelValue","rules"]),r(E,{modelValue:t.license,"onUpdate:modelValue":s[8]||(s[8]=e=>t.license=e),variant:"",rules:[e=>!!e||a(o)("licenseMessage")]},null,8,["modelValue","rules"]),r(C,{modelValue:t.count,"onUpdate:modelValue":s[9]||(s[9]=e=>t.count=e),rules:[e=>e>10||a(o)("countMessage")]},null,8,["modelValue","rules"]),r(S,{modelValue:t.range,"onUpdate:modelValue":s[10]||(s[10]=e=>t.range=e),rules:[e=>e>10||a(o)("rangeMessage")]},null,8,["modelValue","rules"]),r(R,{modelValue:t.files,"onUpdate:modelValue":s[11]||(s[11]=e=>t.files=e),rules:[e=>e.length>=1||a(o)("filesMessage")]},null,8,["modelValue","rules"])]),_:1}),r(a(O),null,{default:n(()=>[g(c(a(o)("customFormComponent")),1)]),_:1}),r(a(Ie),{modelValue:t.custom,"onUpdate:modelValue":s[12]||(s[12]=e=>t.custom=e),"extra-message":a(o)("customExtraMessage"),rules:[e=>!!e||a(o)("customErrorMessage")]},{default:n(()=>[g(c(a(o)("customLabel")),1)]),_:1},8,["modelValue","extra-message","rules"])]),_:1},8,["disabled","readonly"]),r(a(O),null,{default:n(()=>[g(c(a(o)("controller")),1)]),_:1}),r(I,{direction:"column",size:["4vmin",0]},{default:n(()=>[r(U,{block:"",type:"danger",onClick:s[13]||(s[13]=e=>m.value.reset())},{default:n(()=>[g(c(a(o)("reset")),1)]),_:1}),r(U,{block:"",type:"warning",onClick:s[14]||(s[14]=e=>m.value.resetValidation())},{default:n(()=>[g(c(a(o)("resetValidation")),1)]),_:1}),r(U,{block:"",type:"success",onClick:s[15]||(s[15]=e=>m.value.validate())},{default:n(()=>[g(c(a(o)("validate")),1)]),_:1}),r(U,{block:"",type:"info",onClick:s[16]||(s[16]=e=>d.value=!d.value)},{default:n(()=>[g(c(a(o)("disabled")),1)]),_:1}),r(U,{block:"",type:"primary",onClick:s[17]||(s[17]=e=>b.value=!b.value)},{default:n(()=>[g(c(a(o)("readonly")),1)]),_:1})]),_:1}),s[18]||(s[18]=P("div",{class:"space"},null,-1))],64)}}},Ke=N(Le,[["__scopeId","data-v-7451d01c"]]);export{Ke as default};
