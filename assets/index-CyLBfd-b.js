import{X as f,an as x,ag as g,af as T}from"./index-B7X_Lqq8.js";import{c as $}from"./components-tQcLnaru.js";const y={locks:{},zIndex:2e3,enableRipple:!0};f(y);const R=f(y),{n:_}=$("ripple"),v=250;function A(e){const{zIndex:t,position:i}=T(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",i==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function m(e){return"touches"in e}function I(e,t){const{top:i,left:p}=g(e),{clientWidth:n,clientHeight:o}=e,s=Math.sqrt(n**2+o**2)/2,a=s*2,r=m(t)?t.touches[0].clientX-p:n/2,c=m(t)?t.touches[0].clientY-i:o/2,k=(n-s*2)/2,E=(o-s*2)/2,b=r-s,L=c-s;return{x:b,y:L,centerX:k,centerY:E,size:a}}function u(e){const t=this._ripple;if(t.removeRipple(),t.disabled||t.tasker||!R.enableRipple)return;const i=()=>{t.tasker=null;const{x:p,y:n,centerX:o,centerY:s,size:a}=I(this,e),r=document.createElement("div");r.classList.add(_()),r.style.opacity="0",r.style.transform=`translate(${p}px, ${n}px) scale3d(.3, .3, .3)`,r.style.width=`${a}px`,r.style.height=`${a}px`,t.color&&(r.style.backgroundColor=t.color),r.dataset.createdAt=String(performance.now()),A(this),this.appendChild(r),window.setTimeout(()=>{r.style.transform=`translate(${o}px, ${s}px) scale3d(1, 1, 1)`,r.style.opacity=".25"},20)};t.tasker=window.setTimeout(i,30)}function l(){const e=this._ripple,t=()=>{const i=this.querySelectorAll(`.${_()}`);if(!i.length)return;const p=i[i.length-1],n=v-performance.now()+Number(p.dataset.createdAt);window.setTimeout(()=>{p.style.opacity="0",window.setTimeout(()=>{var o;return(o=p.parentNode)==null?void 0:o.removeChild(p)},v)},n)};e.tasker?window.setTimeout(t,30):t()}function w(){if(!x()||!R.enableRipple)return;const e=this._ripple;e.tasker&&window.clearTimeout(e.tasker),e.tasker=null}let d=!1;function N(e){d||!(e.key===" "||e.key==="Enter")||(u.call(this,e),d=!0)}function h(){d&&(l.call(this),d=!1)}function X(e,t){e._ripple={tasker:null,...t.value??{},removeRipple:l.bind(e)},e.addEventListener("touchstart",u,{passive:!0}),e.addEventListener("touchmove",w,{passive:!0}),e.addEventListener("dragstart",l,{passive:!0}),e.addEventListener("keydown",N),e.addEventListener("keyup",h),e.addEventListener("blur",h),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0}),document.addEventListener("dragend",e._ripple.removeRipple,{passive:!0})}function z(e){e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",w),e.removeEventListener("dragstart",l),!(!e._ripple||!e._ripple.removeRipple)&&(document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple),document.removeEventListener("dragend",e._ripple.removeRipple))}function S(e,t){var n,o,s,a,r,c;const i={color:(n=t.value)==null?void 0:n.color,disabled:(o=t.value)==null?void 0:o.disabled};(i.color!==((s=e._ripple)==null?void 0:s.color)||i.disabled!==((a=e._ripple)==null?void 0:a.disabled))&&(e._ripple={tasker:i.disabled?null:(r=e._ripple)==null?void 0:r.tasker,removeRipple:(c=e._ripple)==null?void 0:c.removeRipple,...i})}const K={mounted:X,unmounted:z,updated:S,install(e){e.directive("ripple",this)}};export{K as R};
