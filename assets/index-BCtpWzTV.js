import{X as h,an as x,ag as g,af as T}from"./index-DtCrA0ro.js";import{c as $}from"./components-DCYWhF10.js";const f={locks:{},zIndex:2e3,enableRipple:!0};h(f);const y=h(f),{n:R}=$("ripple"),u=250;function A(e){const{zIndex:t,position:r}=T(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",r==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function v(e){return"touches"in e}function I(e,t){const{top:r,left:o}=g(e),{clientWidth:n,clientHeight:p}=e,s=Math.sqrt(n**2+p**2)/2,a=s*2,i=v(t)?t.touches[0].clientX-o:n/2,w=v(t)?t.touches[0].clientY-r:p/2,k=(n-s*2)/2,E=(p-s*2)/2,b=i-s,L=w-s;return{x:b,y:L,centerX:k,centerY:E,size:a}}function d(e){const t=this._ripple;if(t.removeRipple(),t.disabled||t.tasker||!y.enableRipple)return;const r=()=>{t.tasker=null;const{x:o,y:n,centerX:p,centerY:s,size:a}=I(this,e),i=document.createElement("div");i.classList.add(R()),i.style.opacity="0",i.style.transform=`translate(${o}px, ${n}px) scale3d(.3, .3, .3)`,i.style.width=`${a}px`,i.style.height=`${a}px`,t.color&&(i.style.backgroundColor=t.color),i.dataset.createdAt=String(performance.now()),A(this),this.appendChild(i),window.setTimeout(()=>{i.style.transform=`translate(${p}px, ${s}px) scale3d(1, 1, 1)`,i.style.opacity=".25"},20)};t.tasker=window.setTimeout(r,30)}function c(){const e=this._ripple,t=()=>{const r=this.querySelectorAll(`.${R()}`);if(!r.length)return;const o=r[r.length-1],n=u-performance.now()+Number(o.dataset.createdAt);window.setTimeout(()=>{o.style.opacity="0",window.setTimeout(()=>o.parentNode?.removeChild(o),u)},n)};e.tasker?window.setTimeout(t,30):t()}function _(){if(!x()||!y.enableRipple)return;const e=this._ripple;e.tasker&&window.clearTimeout(e.tasker),e.tasker=null}let l=!1;function N(e){l||!(e.key===" "||e.key==="Enter")||(d.call(this,e),l=!0)}function m(){l&&(c.call(this),l=!1)}function X(e,t){e._ripple={tasker:null,...t.value??{},removeRipple:c.bind(e)},e.addEventListener("touchstart",d,{passive:!0}),e.addEventListener("touchmove",_,{passive:!0}),e.addEventListener("dragstart",c,{passive:!0}),e.addEventListener("keydown",N),e.addEventListener("keyup",m),e.addEventListener("blur",m),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0}),document.addEventListener("dragend",e._ripple.removeRipple,{passive:!0})}function z(e){e.removeEventListener("touchstart",d),e.removeEventListener("touchmove",_),e.removeEventListener("dragstart",c),!(!e._ripple||!e._ripple.removeRipple)&&(document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple),document.removeEventListener("dragend",e._ripple.removeRipple))}function S(e,t){const r={color:t.value?.color,disabled:t.value?.disabled};(r.color!==e._ripple?.color||r.disabled!==e._ripple?.disabled)&&(e._ripple={tasker:r.disabled?null:e._ripple?.tasker,removeRipple:e._ripple?.removeRipple,...r})}const K={mounted:X,unmounted:z,updated:S,install(e){e.directive("ripple",this)}};export{K as R};
