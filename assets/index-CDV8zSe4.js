import{au as le,a4 as te,av as re,d as j,D as Y,aw as W,a3 as K,ax as ne,b as R,m as C,h as k,t as A,x as E,f as ue,w as u,y as L,p as B,q as r,T as D,R as p,U as a,n as de,a6 as U,X as me,r as z,F as ie,S as pe,e as i,Q as g,N as ce}from"./index-B7X_Lqq8.js";import{d as Q,c as G,u as ge,w as H,a as J}from"./components-tQcLnaru.js";import{g as fe,a as X,b as ve,s as be}from"./elements-Cxawf0gZ.js";import{l as Me}from"./shared-CLJMkEr9.js";import{I as Ve}from"./index-BcvhaWPG.js";import{A as O}from"./appType-DBA20onI.js";const Z={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:Q(),onReset:Q()},ee=Symbol("FORM_BIND_FORM_ITEM_KEY");function _e(){const{parentProvider:l,index:t,bindParent:m}=te(ee),d=re();return{index:t,form:l,bindForm:m?V=>{m({...V,instance:d})}:null}}function ye(){const{childProviders:l,length:t,bindChildren:m}=le(ee);return{length:t,formItems:l,bindFormItems:m}}const{name:he,n:ke}=G("form"),$e=j({name:he,props:Z,setup(l){const t=Y(()=>l.disabled),m=Y(()=>l.readonly),{formItems:d,bindFormItems:M}=ye();M({disabled:t,readonly:m});function f(n){setTimeout(()=>{const b=fe(n),c=b===window?0:X(b),y=X(n)-c-ve(l.scrollToErrorOffsetY);be(b,{top:y,animation:Me})},300)}async function s(n){W(n);const b=await T();K(l.onSubmit,b)}function $(n){W(n),v(),K(l.onReset)}async function T(){var b;const n=await Promise.all(d.map(({validate:c})=>c()));if(l.scrollToError){const[,c]=ne(n,h=>h===!1,l.scrollToError),y=c>-1;if(y){const h=(b=d[c].instance.proxy)==null?void 0:b.$el;f(h)}return!y}return n.every(c=>c===!0)}function v(){return d.forEach(({reset:n})=>n())}function _(){return d.forEach(({resetValidation:n})=>n())}return{n:ke,handleSubmit:s,handleReset:$,validate:T,reset:v,resetValidation:_}}});function Te(l,t,m,d,M,V){return k(),C("form",{class:E(l.n()),onSubmit:t[0]||(t[0]=(...f)=>l.handleSubmit&&l.handleSubmit(...f)),onReset:t[1]||(t[1]=(...f)=>l.handleReset&&l.handleReset(...f))},[A(l.$slots,"default")],34)}const S=R($e,[["render",Te]]);S.useValidation=ge;S.useForm=_e;H(S);J(S,Z);const ae={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{name:we,n:Ce}=G("form-details"),Ue=j({name:we,props:ae,setup:()=>({n:Ce})}),Fe={key:0},xe={key:0};function Ee(l,t,m,d,M,V){return k(),ue(D,{name:l.n()},{default:u(()=>[l.errorMessage||l.extraMessage||l.$slots["extra-message"]?(k(),C("div",{key:0,class:E(l.n())},[B("div",{class:E(l.n("error-message"))},[r(D,{name:l.n("message")},{default:u(()=>[l.errorMessage?(k(),C("div",Fe,p(l.errorMessage),1)):L("v-if",!0)]),_:1},8,["name"])],2),B("div",{class:E(l.n("extra-message"))},[r(D,{name:l.n("message")},{default:u(()=>[A(l.$slots,"extra-message",{},()=>[l.extraMessage?(k(),C("div",xe,p(l.extraMessage),1)):L("v-if",!0)])]),_:3},8,["name"])],2)],2)):L("v-if",!0)]),_:3},8,["name"])}const q=R(Ue,[["render",Ee]]);H(q);J(q,ae);const Se={__name:"CustomFormComponent",props:{modelValue:Boolean,disabled:Boolean,readonly:Boolean,rules:{type:Array},validateTrigger:{type:Array,default:()=>["onToggle"]},extraMessage:{type:String}},emits:["update:modelValue"],setup(l,{expose:t,emit:m}){const d=l,M=m,{useForm:V,useValidation:f}=S,{errorMessage:s,validateWithTrigger:$,validate:T,resetValidation:v}=f(),{bindForm:_,form:n}=V(),b=()=>T(d.rules,d.modelValue);function c(){M("update:modelValue",!1),v()}function y(F){de(()=>{const{validateTrigger:P,rules:w,modelValue:N}=d;$(P,F,w,N)})}function h(){d.readonly||d.disabled||n!=null&&n.readonly.value||n!=null&&n.disabled.value||(M("update:modelValue",!d.modelValue),y("onToggle"))}const I={reset:c,validate:b,resetValidation:v};return t(I),_==null||_(I),(F,P)=>{var w;return k(),C("div",{class:E(["var-custom-form-component",{"var-custom-form-component--disabled":l.disabled||((w=a(n))==null?void 0:w.disabled.value),"var-custom-form-component--error":a(s)}])},[B("div",{class:"var-custom-form-component__container",onClick:h},[r(a(Ve),{class:"var-custom-form-component__icon",name:l.modelValue?"checkbox-marked-circle":"close-circle",transition:250},null,8,["name"]),A(F.$slots,"default",{},void 0,!0)]),r(a(q),{"error-message":a(s),"extra-message":l.extraMessage},null,8,["error-message","extra-message"])],2)}}},Ie=R(Se,[["__scopeId","data-v-2662b6e0"]]),Pe={example:"Form Example",username:"Please input username",usernameMessage:"The username cannot be empty",password:"Please input password",passwordMessage:"The password cannot be empty",email:"Please input email",emailMessage:"The email cannot be empty",passwordMinLengthMessage:"The password cannot be less than 8 characters",department:"Please select department",departmentMessage:"The select cannot be empty",eat:"Eat",sleep:"Sleep",play:"Play game",departmentUnit:" department",group:"Please select group",groupMessage:"The select cannot be empty",groupUnit:" group",genderMessage:"The gender cannot be empty",male:"Male",female:"Female",rateMessage:"It has to be greater than 2",likeMessage:"The select cannot be empty",licenseMessage:"You must turn on",countMessage:"It has to be greater than 10",rangeMessage:"It has to be greater than 10",filesMessage:"Upload at least one picture",customFormComponent:"Custom Form Component",customLabel:"Click toggle",customErrorMessage:"Please check it",customExtraMessage:"Extra message",controller:"Form control",reset:"Empty form",resetValidation:"Empty the validation",validate:"Trigger validation",disabled:"Form disabled",readonly:"Form readonly"},Ne={example:"表单示例",username:"请输入用户名",usernameMessage:"用户名不能为空",password:"请输入密码",passwordMessage:"密码不能为空",email:"请输入邮箱",emailMessage:"邮箱不能为空",passwordMinLengthMessage:"密码长度不能低于8位",department:"请选择部门",departmentMessage:"必须选一个部门",eat:"吃饭",sleep:"睡觉",play:"打游戏",departmentUnit:"部",group:"请选择组织",groupMessage:"至少选择一个组织",groupUnit:"组",genderMessage:"必须选择一个性别",male:"男",female:"女",rateMessage:"必须大于2",likeMessage:"至少选择一个爱好",licenseMessage:"您必须开启",countMessage:"必须大于10",rangeMessage:"必须大于10",filesMessage:"至少上传一张图片",customFormComponent:"自定义表单组件",customLabel:"点我切换",customErrorMessage:"必须是对勾",customExtraMessage:"附加信息",controller:"表单控制",reset:"清空表单",resetValidation:"清空验证",validate:"触发验证",disabled:"表单禁用",readonly:"表单只读"},{add:se,use:Be,t:o,merge:We}=U.useLocale(),Re=l=>{U.use(l),Be(l)};U.add("zh-CN",U.zhCN);U.add("en-US",U.enUS);se("zh-CN",Ne);se("en-US",Pe);const Le={__name:"index",setup(l){const t=me({username:"",password:"",email:"",department:"",gender:void 0,license:!1,range:0,count:0,group:[],score:0,like:[],files:[],custom:!1}),m=z(null),d=z(!1),M=z(!1),V=Y(()=>["@qq.com","@163.com","@gmail.com"].map(f=>{const[s]=t.email.split("@");return{label:s+f,value:s+f}}));return ie(f=>{var s;Re(f),(s=m.value)==null||s.reset()}),pe(),(f,s)=>{const $=i("var-input"),T=i("var-auto-complete"),v=i("var-option"),_=i("var-select"),n=i("var-radio"),b=i("var-radio-group"),c=i("var-checkbox"),y=i("var-checkbox-group"),h=i("var-rate"),I=i("var-switch"),F=i("var-counter"),P=i("var-slider"),w=i("var-uploader"),N=i("var-space"),oe=i("var-form"),x=i("var-button");return k(),C(ce,null,[r(a(O),null,{default:u(()=>[g(p(a(o)("example")),1)]),_:1}),r(oe,{ref_key:"form",ref:m,disabled:d.value,readonly:M.value,"scroll-to-error":"start","scroll-to-error-offset-y":"14.4vmin"},{default:u(()=>[r(N,{direction:"column",size:["4vmin",0]},{default:u(()=>[r($,{modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=e=>t.username=e),placeholder:a(o)("username"),rules:[e=>!!e||a(o)("usernameMessage")]},null,8,["modelValue","placeholder","rules"]),r($,{modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.password=e),type:"password",placeholder:a(o)("password"),rules:[e=>!!e||a(o)("passwordMessage"),e=>e.length>=8||a(o)("passwordMinLengthMessage")]},null,8,["modelValue","placeholder","rules"]),r(T,{modelValue:t.email,"onUpdate:modelValue":s[2]||(s[2]=e=>t.email=e),placeholder:a(o)("email"),rules:[e=>!!e||a(o)("emailMessage")],options:V.value},null,8,["modelValue","placeholder","rules","options"]),r(_,{modelValue:t.department,"onUpdate:modelValue":s[3]||(s[3]=e=>t.department=e),placeholder:a(o)("department"),rules:[e=>!!e||a(o)("departmentMessage")]},{default:u(()=>[r(v,{label:`${a(o)("eat")}${a(o)("departmentUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("sleep")}${a(o)("departmentUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("play")}${a(o)("departmentUnit")}`},null,8,["label"])]),_:1},8,["modelValue","placeholder","rules"]),r(_,{modelValue:t.group,"onUpdate:modelValue":s[4]||(s[4]=e=>t.group=e),multiple:"",placeholder:a(o)("group"),rules:[e=>e.length>=1||a(o)("groupMessage")]},{default:u(()=>[r(v,{label:`${a(o)("eat")}${a(o)("groupUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("sleep")}${a(o)("groupUnit")}`},null,8,["label"]),r(v,{label:`${a(o)("play")}${a(o)("groupUnit")}`},null,8,["label"])]),_:1},8,["modelValue","placeholder","rules"]),r(b,{modelValue:t.gender,"onUpdate:modelValue":s[5]||(s[5]=e=>t.gender=e),rules:[e=>!!e||a(o)("genderMessage")]},{default:u(()=>[r(n,{"checked-value":1},{default:u(()=>[g(p(a(o)("male")),1)]),_:1}),r(n,{"checked-value":2},{default:u(()=>[g(p(a(o)("female")),1)]),_:1})]),_:1},8,["modelValue","rules"]),r(y,{modelValue:t.like,"onUpdate:modelValue":s[6]||(s[6]=e=>t.like=e),rules:[e=>e.length>0||a(o)("likeMessage")]},{default:u(()=>[r(c,{"checked-value":1},{default:u(()=>[g(p(a(o)("eat")),1)]),_:1}),r(c,{"checked-value":2},{default:u(()=>[g(p(a(o)("sleep")),1)]),_:1}),r(c,{"checked-value":3},{default:u(()=>[g(p(a(o)("play")),1)]),_:1})]),_:1},8,["modelValue","rules"]),r(h,{modelValue:t.score,"onUpdate:modelValue":s[7]||(s[7]=e=>t.score=e),rules:[e=>e>=3||a(o)("rateMessage")]},null,8,["modelValue","rules"]),r(I,{modelValue:t.license,"onUpdate:modelValue":s[8]||(s[8]=e=>t.license=e),variant:"",rules:[e=>!!e||a(o)("licenseMessage")]},null,8,["modelValue","rules"]),r(F,{modelValue:t.count,"onUpdate:modelValue":s[9]||(s[9]=e=>t.count=e),rules:[e=>e>10||a(o)("countMessage")]},null,8,["modelValue","rules"]),r(P,{modelValue:t.range,"onUpdate:modelValue":s[10]||(s[10]=e=>t.range=e),rules:[e=>e>10||a(o)("rangeMessage")]},null,8,["modelValue","rules"]),r(w,{modelValue:t.files,"onUpdate:modelValue":s[11]||(s[11]=e=>t.files=e),rules:[e=>e.length>=1||a(o)("filesMessage")]},null,8,["modelValue","rules"])]),_:1}),r(a(O),null,{default:u(()=>[g(p(a(o)("customFormComponent")),1)]),_:1}),r(a(Ie),{modelValue:t.custom,"onUpdate:modelValue":s[12]||(s[12]=e=>t.custom=e),"extra-message":a(o)("customExtraMessage"),rules:[e=>!!e||a(o)("customErrorMessage")]},{default:u(()=>[g(p(a(o)("customLabel")),1)]),_:1},8,["modelValue","extra-message","rules"])]),_:1},8,["disabled","readonly"]),r(a(O),null,{default:u(()=>[g(p(a(o)("controller")),1)]),_:1}),r(N,{direction:"column",size:["4vmin",0]},{default:u(()=>[r(x,{block:"",type:"danger",onClick:s[13]||(s[13]=e=>m.value.reset())},{default:u(()=>[g(p(a(o)("reset")),1)]),_:1}),r(x,{block:"",type:"warning",onClick:s[14]||(s[14]=e=>m.value.resetValidation())},{default:u(()=>[g(p(a(o)("resetValidation")),1)]),_:1}),r(x,{block:"",type:"success",onClick:s[15]||(s[15]=e=>m.value.validate())},{default:u(()=>[g(p(a(o)("validate")),1)]),_:1}),r(x,{block:"",type:"info",onClick:s[16]||(s[16]=e=>d.value=!d.value)},{default:u(()=>[g(p(a(o)("disabled")),1)]),_:1}),r(x,{block:"",type:"primary",onClick:s[17]||(s[17]=e=>M.value=!M.value)},{default:u(()=>[g(p(a(o)("readonly")),1)]),_:1})]),_:1}),s[18]||(s[18]=B("div",{class:"space"},null,-1))],64)}}},Ke=R(Le,[["__scopeId","data-v-7451d01c"]]);export{Ke as default};
